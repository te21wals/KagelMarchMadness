plugins {
    id 'com.palantir.docker' version '0.19.2'
    id 'groovy'
    id 'java'
    id 'application'
    id 'idea'
    id 'distribution'
}

docker {
    name 'hub.docker.com/te21wals/kmm:SNAPSHOT'
    files tasks.jar.outputs
    copySpec.from("input").into('/src')
    dockerfile file('Dockerfile') // default value not needed here
}

task dockerRun(type:Exec) {
    dependsOn tasks.docker
    commandLine 'docker', 'run', '-i', "${docker.name}"
}

jar {
    manifest {
        attributes 'Main-Class': 'kmm.MarchMadness2018'
    }
}

sourceCompatibility = 1.8
mainClassName= 'kmm.MarchMadness2018'

repositories {
    mavenCentral()
}

dependencies {
    compile 'org.codehaus.groovy:groovy-all:2.3.11'
}
